(this.webpackJsonpfrontend=this.webpackJsonpfrontend||[]).push([[0],{113:function(e,t){},168:function(e,t,n){"use strict";n.r(t);var o=n(0),a=n.n(o),r=n(12),l=n.n(r),i=(n(83),n(4)),c=n(76),s=n(5),m=n(71),u=n.n(m),d=n(172),f=n(1),g=n(48),h=n(17),p=n(24),v=n(171),y=n(20),b=n(72),w=n.n(b),k="#ffcdd2",E="#e57373",C="#ef5350",T="#f44336",S="#e53935",x="#d32f2f",O="#c5cae9",D="#5c6bc0",R="#3f51b5",j="#6583C3",G="#153373",P="#355393",M="#eaeaea",I="#454545",W="#313131",L="rgb(240,240,170)",A={background:["#009688","#004d40"],backgroundImage:["none","none"],container:["#00796b","keep"],button:["#4db6ac","keep"],importantButton:[T,"keep"],header:[C,"#b71c1c"],headerButton:[S,"keep"],recentGamesBackground:[E,x],recentGamesAlternate:[C,S]},N={background:[P,"keep"],backgroundImage:["blueBgLight","blueBgDark"],container:[P,G],button:[j,"keep"],importantButton:[T,"keep"],header:[P,G],headerButton:[j,"keep"],recentGamesBackground:[j,"#4866A6"],recentGamesAlternate:["#5876B6","keep"]},B={ground:["#d2d2d2",I],emptyWall:[M,W],pillar:["#cccccc",I],hoveredGround:["#fbe4D6","flip"],hoveredWall:["#f1bfa0","flip"],player1:[T,C],player2:[R,D],timer1:[C,"keep"],timer2:[D,"keep"],lowTime:["#ffb74d","keep"],wall1:[T,C],wall2:[R,D],goalBackground1:[k,x],goalBackground2:[O,"#303f9f"],goalToken:[M,W],ghost1:[k,k],ghost2:[O,O],ghostWall1:["#ef9a9a",E],ghostWall2:["#9fa8da",O],traceGround:[L,"#656505"],lastMoveTokenBorder:[L,"yellow"],lastMoveWallBorder:[L,"#fdd835"],coord:["#ffffff","#000000"],move1:[E,"keep"],move2:["#7986cb","keep"],currentMove:["#ffb300","keep"]},H=function(e,t,n){void 0===e[t]&&console.error("theme ".concat(e," does not have element ").concat(t));var o=e[t][0];if(!n)return o;var a=e[t][1];return"keep"===a?o:"flip"===a?w()(o):a},z=function(e,t,n){return"green"===e?H(A,t,n):"blue"===e?H(N,t,n):"monochromeBoard"===e?H(B,t,n):(console.error("unknown theme "+e),"#00FF00")},_=n(73),F=n.n(_),q=n(74),V=n.n(q),J={tl:{r:0,c:0},tr:{r:0,c:22},bl:{r:18,c:0},br:{r:18,c:22}},Y={boardDims:{w:23,h:19},boardCorners:J,initialPlayerPos:[J.tl,J.tr],goals:[J.br,J.bl],groundSize:37,wallWidth:12,smallScreenGroundSize:23,smallScreenWallWidth:10},U=n(32),Q=n.n(U),K=n(33),X=n.n(K),Z=function(e,t){t&&0!==t||(t=2500),Object(p.c)(e,{autoClose:t,hideProgressBar:!0,transition:p.a,pauseOnFocusLoss:!1})},$=n(15),ee=n.n($);function te(e){return e.r%2===0&&e.c%2===0?"Ground":e.r%2===0&&e.c%2===1||e.r%2===1&&e.c%2===0?"Wall":"Pillar"}function ne(e,t){return e.r===t.r&&e.c===t.c}function oe(e){for(var t=[],n=0;n<e.h;n++){t[n]=[];for(var o=0;o<e.w;o++)t[n][o]=0}return t}function ae(e,t){return e.r>=0&&e.r<t.h&&e.c>=0&&e.c<t.w}function re(e,t){return"Wall"===te(t)&&0!==e[t.r][t.c]}function le(e,t){var n=function(e){return{h:e.length,w:e[0].length}}(e);if("Ground"!==te(t))return[];for(var o=[{r:0,c:1},{r:0,c:-1},{r:1,c:0},{r:-1,c:0}],a=[],r=[t.r,t.c],l=r[0],i=r[1],c=0;c<o.length;c++){var s=[o[c].r,o[c].c],m=s[0],u=s[1],d={r:l+m,c:i+u},f={r:l+2*m,c:i+2*u};ae(f,n)&&!re(e,d)&&a.push(f)}return a}function ie(e,t,n){if(ne(t,n))return 0;var o=e[0].length,a=function(e){return e.r*o+e.c},r=[],l=0;r.push(t);var i=new Map;for(i.set(a(t),0);l<r.length;){var c=r[l];l+=1;for(var s=le(e,c),m=0;m<s.length;m++){var u=s[m];if(!i.has(a(u))){if(i.set(a(u),i.get(a(c))+1),ne(u,n))return i.get(a(u));r.push(u)}}}return-1}function ce(e,t,n,o){if(ne(t,n))return 0;var a=e[0].length,r=function(e){return e.r*a+e.c},l=[],i=0;l.push(t);var c=new Map;for(c.set(r(t),0);i<l.length;){var s=l[i];i+=1;var m=c.get(r(s));if(m>o)return!1;for(var u=le(e,s),d=0;d<u.length;d++){var f=u[d];if(!c.has(r(f))){if(ne(f,n))return m+1<=o;c.set(r(f),m+1),l.push(f)}}}return!1}function se(e,t,n){return-1!==ie(e,t,n)}function me(e,t,n,o){if(re(e,o))return!1;e[o.r][o.c]=1;var a=function(e,t,n){for(var o=0;o<t.length;o++)if(!se(e,t[o],n[o]))return!1;return!0}(e,t,n);return e[o.r][o.c]=0,a}function ue(e){return 0===e.r?"X":""+(10-e.r/2)}function de(e){return String.fromCharCode(97+e.c/2)}function fe(e){return"Ground"===te(e)?de(e)+ue(e):e.c%2===1?de({r:e.r,c:e.c-1})+de({r:e.r,c:e.c+1})+ue(e):de(e)+ue({r:e.r+1,c:e.c})+ue({r:e.r-1,c:e.c})}var ge=Y.goals,he=Y.boardDims,pe=Y.initialPlayerPos,ve=function(e){return e.moveHistory.length-1},ye=function(e){return ve(e)%2===(e.creatorStarts?0:1)},be=function(e){return e.viewIndex%2===(e.creatorStarts?0:1)},we=function(e){return ye(e)?0:1},ke=function(e){return null===e?"None":te(e)},Ee=function(e){return e.arePlayersPresent["Creator"===e.clientRole?1:0]},Ce=function(e,t,n,o,a,r,l){for(var i=ee()(e),c=0;c<l.length;c++){var s=l[c];i[s.r][s.c]=1}return"Ground"===te(t)?ie(i,n,t):me(i,[n,o],[a,r],t)?1:0},Te=function(e,t){if(t&&(t.isVolumeOn&&"true"===t.isVolumeOn&&(e.isVolumeOn=!0),t.zoomLevel)){var n=parseInt(t.zoomLevel);n>=0&&n<=10&&(e.zoomLevel=n)}},Se=function(e,t,n,o){e.clientRole="Creator",e.lifeCycleStage=-1,e.timeControl=t,e.names[0]=n,e.tokens[0]=o;var a=60*t.duration;e.moveHistory[0].timeLeft=[a,a]},xe=function(e,t,n,o){e.clientRole="Joiner",e.lifeCycleStage=-1,e.joinCode=t,e.names[1]=n,e.tokens[1]=o},Oe=function(e,t,n){0!==e.lifeCycleStage&&(e.joinCode=t,e.creatorStarts=n,e.lifeCycleStage=0)},De=function(e,t,n,o,a,r){if(1!==e.lifeCycleStage){e.creatorStarts=a,e.names[0]=t,e.tokens[0]=n,e.timeControl=o,e.arePlayersPresent[0]=r;var l=60*o.duration;e.moveHistory[0].timeLeft=[l,l],e.lifeCycleStage=1}},Re=function(e,t,n){1!==e.lifeCycleStage&&(e.names[1]=t,e.tokens[1]=n,e.lifeCycleStage=1)},je=function(e,t,n,o){if(!(e.lifeCycleStage<1||e.lifeCycleStage>3)){var a=ve(e);if(a===o-1){var r=we(e),l=0===r?1:0,i=ee()(e.moveHistory[a].playerPos),c=ee()(e.moveHistory[a].grid),s=ee()(e.moveHistory[a].timeLeft),m=ee()(e.moveHistory[a].wallCounts);s[r]=n;for(var u=0;u<t.length;u++){var d=t[u],f=te(d);if("Ground"===f){if(i[r]=d,ne(d,ge[r])){var g=a%2===0,h=ce(c,i[l],ge[l],2);g&&h?(e.winner="draw",e.gameWins[0]+=.5,e.gameWins[1]+=.5):(e.winner=0===r?"creator":"joiner",e.gameWins[r]+=1),e.finishReason="goal",e.lifeCycleStage=4}}else"Wall"===f?(c[d.r][d.c]=r+1,m[r]+=1):console.error("unexpected action type",f)}if(e.moveHistory.push({index:a+1,actions:t,grid:c,playerPos:i,timeLeft:s,distances:[ie(c,i[0],ge[0]),ie(c,i[1],ge[1])],wallCounts:m}),1===e.lifeCycleStage&&0===a?e.lifeCycleStage=2:2===e.lifeCycleStage&&1===a&&(e.lifeCycleStage=3),e.ghostAction=null,e.viewIndex=a+1,e.premoveActions.length>0){var p=e.premoveActions;e.premoveActions=[];for(var v=0;v<p.length;v++)Me(e,p[v],!0,!1)}}}},Ge=new Q.a(X.a),Pe=function(){Ge.play()},Me=function(e,t,n,o){if(n){if(!(e.lifeCycleStage<1)&&!(e.lifeCycleStage>3)&&e.viewIndex===ve(e)&&!(t.r<0||t.r>=he.h||t.c<0||t.c>=he.w)){var a=te(t);if(!(e.lifeCycleStage<3&&"Wall"===a)){var r=we(e),l=0===r?1:0,i=ke(e.ghostAction),c="Wall"===i?[e.ghostAction]:[],s=ve(e),m=e.moveHistory[s].playerPos[r];"Wall"===a&&"Ground"===i&&(m=e.ghostAction);var u=Ce(e.moveHistory[s].grid,t,m,e.moveHistory[s].playerPos[l],ge[r],ge[l],c);if(!(u>2)){var d=null,f=null;if("None"===i){if("Wall"===a){if(1!==u)return;f=t}else if("Ground"===a)if(1===u)f=t;else{if(2!==u)return;d=[t]}}else if("Wall"===i){if("Wall"===a)if(ne(e.ghostAction,t))f=null;else{if(1!==u)return;d=[t,e.ghostAction]}else if("Ground"===a)if(0===u)f=null;else{if(1!==u)return;d=[t,e.ghostAction]}}else if("Ground"===i){if("Wall"===a){if(1!==u)return;d=[t,e.ghostAction]}else if("Ground"===a)if(0===u)f=null;else if(1===u)f=ne(t,e.ghostAction)?null:t;else{if(2!==u)return;d=[t]}}else console.error("unexpected ghost type",i);if(d){var g=we(e),h=ve(e),p=e.moveHistory[h].timeLeft[g];3===e.lifeCycleStage&&(p+=e.timeControl.increment),e.moveToSend={actions:d,remainingTime:p},o&&e.isVolumeOn&&Pe(),je(e,d,p,ve(e)+1)}else e.ghostAction=f}}}}else Ie(e,t)},Ie=function(e,t){if(!(e.lifeCycleStage>3)&&e.viewIndex===ve(e)&&!(t.r<0||t.r>=he.h||t.c<0||t.c>=he.w)){var n=te(t);if(!(e.lifeCycleStage<2&&"Wall"===n)){for(var o=0===we(e)?1:0,a=0===o?1:0,r=ve(e),l=[],i=null,c=0;c<e.premoveActions.length;c++){var s=e.premoveActions[c];"Wall"===te(s)?l.push(s):i=s}var m=e.moveHistory[r].playerPos[o];"Wall"===n&&i&&(m=i);var u=Ce(e.moveHistory[r].grid,t,m,e.moveHistory[r].playerPos[a],ge[o],ge[a],l),d=null;if(i&&(d=Ce(e.moveHistory[r].grid,i,e.moveHistory[r].playerPos[o],e.moveHistory[r].playerPos[a],ge[o],ge[a],l)),!(u>2)){var f;if(0===e.premoveActions.length)f="Empty";else if(i||1!==l.length)if(i||2!==l.length)if(i&&1===l.length)f="GroundWall";else if(i&&1===d)f="GroundDist1";else{if(!i||2!==d)return void console.error("Unknown premove state",i,l,u,d);f="GroundDist2"}else f="WallWall";else f="Wall";var g=[];if(ne(t,m))return 0===e.premoveActions.length?void 0:void(e.premoveActions=[]);var h=null,p=null;if(1===l.length){var v=[l[0],null];h=v[0],p=v[1]}else if(2===l.length){var y=[l[0],l[1]];h=y[0],p=y[1]}if("Empty"===f)if("Wall"===n){if(1!==u)return;g=[t]}else"Ground"===n&&(1===u||2===u?g=[t]:console.error("unreachable case"));else if("Wall"===f){if("Wall"===n)if(ne(h,t))g=[];else{if(1!==u)return;g=[h,t]}else if("Ground"===n){if(1!==u)return;g=[h,t]}}else if("WallWall"===f){if("Wall"===n)if(ne(h,t))g=[p];else{if(!ne(p,t))return;g=[h]}else if("Ground"===n)return}else if("GroundDist1"===f)if("Wall"===n){if(1!==u)return;g=[i,t]}else"Ground"===n&&(g=ne(t,i)?[]:[t]);else if("GroundDist2"===f){if("Wall"===n)return;"Ground"===n&&(g=ne(t,i)?[]:[t])}else if("GroundWall"===f){if("Wall"===n){if(!ne(t,h))return;g=[i]}else if("Ground"===n)if(ne(t,i))g=[h];else{if(1!==u)return;g=[h,t]}}else console.error("unexpected premove state case",f);g&&(e.premoveActions=g)}}}},We=function(e){e.showRematchDialog=!1,e.showDrawDialog=!1,e.showTakebackDialog=!1,e.ghostAction=null,e.premoveActions=[]},Le=function(e,t){3===e.lifeCycleStage&&(e.isVolumeOn&&Pe(),e.lifeCycleStage=4,e.winner="draw",e.gameWins[0]+=.5,e.gameWins[1]+=.5,e.finishReason=t,We(e))},Ae=function(e,t){3===e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?"joiner":"creator",e.gameWins[t?1:0]+=1,e.finishReason="resign",We(e))},Ne=function(e,t){if(e.showTakebackDialog=!1,2===e.lifeCycleStage||3===e.lifeCycleStage){for(var n=t===ye(e)?2:1,o=0;o<n;o++)e.moveHistory.pop();var a=ve(e);e.viewIndex=a,0===a?e.lifeCycleStage=1:1===a&&(e.lifeCycleStage=2),We(e)}},Be=function(e){if(4===e.lifeCycleStage){e.creatorStarts=!e.creatorStarts;var t=oe(he);e.moveHistory=[{index:0,actions:[],grid:t,playerPos:pe,timeLeft:[60*e.timeControl.duration,60*e.timeControl.duration],distances:[ie(t,pe[0],ge[0]),ie(t,pe[1],ge[1])],wallCounts:[0,0]}],e.winner="",e.finishReason="",e.lifeCycleStage=1,e.viewIndex=0,We(e)}},He=function(e,t){if(3===e.lifeCycleStage){var n=ve(e);e.moveHistory[n].timeLeft[t]+=60}},ze=function(e,t){e.winner=0===t?"creator":"joiner",e.gameWins[t]+=1,e.finishReason="time",e.lifeCycleStage=4,We(e)},_e=function(e){var t=e.grid,n=e.ghostAction,r=e.premoveActions,l=e.lastActions,c=e.tracePos,s=Object(i.a)(e.playerPos,2),m=s[0],u=s[1],d=Object(i.a)(e.goals,2),f=d[0],g=d[1],p=e.handleClick,v=e.creatorToMove,y=e.groundSize,b=e.wallWidth,w=e.menuTheme,k=e.boardTheme,E=e.isDarkModeOn,C=e.tokens,T=!Object(h.useMediaQuery)({query:"(hover: none)"}),S=Object(o.useState)(null),x=Object(i.a)(S,2),O=x[0],D=x[1],R=function(){D(null)},j=function(e){return z(k,e,E)},G="1px solid ".concat(z(w,"container",E)),P=[j("player1"),j("player2")],M=P[0],I=P[1],W=["face","outlet"],L=Object(i.a)(C,2),A=L[0],N=L[1];"default"===A&&(A=W[0]),"default"===N&&(N=W[1]);for(var B=t.length,H=t[0].length,_=[],F=0;F<B;F++)for(var q=0;q<H;q++)_[F*H+q]={r:F,c:q};var V=(B-1)/2,J=(H-1)/2,Y=.8*y,U=j("coord"),Q=function(e,t){return!!(t.length>0&&t[0]&&ne(e,t[0]))||!!(t.length>1&&t[1]&&ne(e,t[1]))};return a.a.createElement("div",{style:{display:"grid",gridTemplateColumns:"repeat(".concat(J,", ").concat(y,"px ").concat(b,"px) ").concat(y,"px"),gridTemplateRows:"repeat(".concat(V,", ").concat(y,"px ").concat(b,"px) ").concat(y,"px"),justifyContent:"center",gridArea:"board",MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},_.map((function(e){var o,i=[ne(e,m),ne(e,u)],s=i[0],d=i[1],h=[ne(e,f),ne(e,g)],b=h[0],w=h[1],k=s||d,C=b||w,S=Q(e,[n]),x=Q(e,r),P=c&&ne(e,c),W=Q(e,l),L=S||x,z=S&&v||x&&!v,_=S&&!v||x&&v,F=W&&!v,q=W&&v,V=y>27&&!(k||C||L),J=V&&e.r===B-1&&e.c%2===0,K=V&&e.c===H-1&&e.r%2===0,X=J||K,Z=T&&O&&ne(e,O),$=te(e),ee="";if("Ground"===$&&(ee+="waves-effect waves-light"),"Wall"===$&&(ee+="waves-effect waves-dark"),"Ground"===$)o=j(Z?"hoveredGround":P?"traceGround":C?"goalBackground".concat(b?"1":"2"):"ground");else if("Wall"===$){var oe=0!==t[e.r][e.c];o=j(oe?"wall".concat(t[e.r][e.c]):S?"ghostWall".concat(v?"1":"2"):x?"ghostWall".concat(v?"2":"1"):Z?"hoveredWall":"emptyWall")}else o=j("pillar");var ae="center",re="center";X&&(ae=J?"flex-start":"flex-end",re=J?"flex-end":"flex-start");var le={backgroundColor:o,display:"flex",justifyContent:ae,alignItems:re,position:"relative"};"Pillar"!==$&&(le.cursor="pointer"),"Wall"===$&&W?le.border="".concat(E?"1":"2","px solid ").concat(j("lastMoveWallBorder")):(0===e.r&&(le.borderTop=G),e.r===B-1&&(le.borderBottom=G),0===e.c&&(le.borderLeft=G),e.c===H-1&&(le.borderRight=G));var ie="0 0 4px ".concat(j("lastMoveTokenBorder")),ce={position:"absolute",height:"90%",width:"90%",top:"5%",left:"5%",cursor:"pointer"};return 0!==e.r&&e.r!==B-1||(ce.height="95%",0===e.r?ce.top="0":ce.top="5%"),0!==e.c&&e.c!==H-1||(ce.width="95%",0===e.c?ce.left="0":ce.left="5%"),a.a.createElement("div",{className:ee,key:"".concat(e.r,"_").concat(e.c),onMouseEnter:function(){return function(e){D(e)}(e)},onMouseLeave:R,style:le,onClick:"Wall"===$&&null!==p?function(){p(e)}:void 0},"Ground"===$&&a.a.createElement("div",{style:ce,onClick:null!==p?function(){p(e)}:void 0}),s&&a.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:M,textShadow:F?ie:"none"}},A),d&&a.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:I,textShadow:q?ie:"none"}},N),"Ground"===$&&(z||_)&&a.a.createElement("i",{className:"material-icons ".concat(M,"-text text-lighten-4"),style:{fontSize:"".concat(Y,"px"),color:j("ghost".concat(z?"1":"2"))}},z?A:N),(b||w)&&!k&&!L&&a.a.createElement("i",{className:"material-icons",style:{fontSize:"".concat(Y,"px"),color:j("goalToken")}},b?A:N),J&&a.a.createElement("div",{style:{color:U,padding:"0",marginLeft:"4px"}},de(e)),K&&a.a.createElement("div",{style:{color:U,padding:"0",marginRight:"4px"}},ue(e)))})))},Fe=(n(161),n(75)),qe=(n(165),function(e){var t,n=e.icon,o=e.tooltip,r=e.onClick,l=e.modalTitle,i=e.modalBody,c=e.modalConfirmButtonText,s=e.bgColor,m=e.padding,u=e.disabled,d=e.menuTheme,g=e.isDarkModeOn;if(s||(s=z(d,"button",g)),!i)return a.a.createElement(f.Button,{style:{backgroundColor:s},node:"button",waves:"light",icon:a.a.createElement(f.Icon,{className:"large"},n),onClick:r,tooltip:o,disabled:u});t=c&&""!==c?[a.a.createElement(f.Button,{style:{backgroundColor:s,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:r},c),a.a.createElement(f.Button,{style:{backgroundColor:s,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Cancel")]:a.a.createElement(f.Button,{style:{backgroundColor:s,color:"white"},flat:!0,modal:"close",node:"button",waves:"green"},"Close");var h=a.a.createElement(f.Button,{style:{padding:"0px ".concat(m,"px"),backgroundColor:s},node:"button",waves:"light",icon:a.a.createElement(f.Icon,{className:"large"},n),tooltip:o,disabled:u});return a.a.createElement(f.Modal,{style:{color:"black",backgroundColor:"white"},bottomSheet:!1,fixedFooter:!1,header:l,open:!1,options:{dismissible:!0,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},trigger:h,actions:t},a.a.createElement("div",null,i))});var Ve=function(e){var t,n=e.context,o=e.helpText,r=e.aboutText,l=e.joinCode,i=e.handleLeaveGame,c=e.isLargeScreen,s=e.menuTheme,m=e.isDarkModeOn,u=e.handleToggleDarkMode,d=e.handleToggleTheme;t="Lobby"===n?a.a.createElement("span",null,"WallWars"):"Spectator"===n?a.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"):a.a.createElement("span",null,c&&a.a.createElement("span",{style:{cursor:"pointer"},onClick:i},"WallWars"),c&&a.a.createElement("span",null,"\xa0"),a.a.createElement(Fe.CopyToClipboard,{style:{cursor:"pointer"},text:l,onCopy:function(){return Z("Join code copied to clipboard!")}},a.a.createElement("span",null,"Code ",l)));var f=c?20:11,g=z(s,"headerButton",m);return a.a.createElement("div",null,a.a.createElement("div",{style:{height:"50px",display:"grid",gridTemplateRows:"1fr",gridTemplateColumns:"auto auto",justifyContent:"space-between",alignItems:"center",backgroundColor:z(s,"header",m)}},a.a.createElement("div",{style:{fontSize:c?"30px":"25px",marginLeft:c?"15px":"5px"}},t),a.a.createElement("div",{style:{height:"auto",display:"grid",padding:"5px",gridTemplateColumns:"repeat(".concat(c?4:3,", 1fr)"),gridTemplateRows:"auto",columnGap:"5px",rowGap:"5px",marginRight:c?"15px":"5px"}},c&&a.a.createElement(qe,{icon:"color_lens",tooltip:"Change theme",onClick:d,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),a.a.createElement(qe,{icon:m?"wb_sunny":"brightness_2",tooltip:m?"Turn off night mode":"Turn on night mode",onClick:u,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),a.a.createElement(qe,{icon:"help",tooltip:"Help",modalTitle:"Help",modalBody:o,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),"Lobby"===n&&a.a.createElement(qe,{icon:"info",tooltip:"About",modalTitle:"About",modalBody:r,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}),"Lobby"!==n&&a.a.createElement(qe,{icon:"home",tooltip:"Leave game",onClick:i,bgColor:g,padding:f,menuTheme:s,isDarkModeOn:m}))))},Je=function(e){var t=e.title,n=e.body,o=e.acceptButtonText,r=e.rejectButtonText,l=e.isOpen,i=e.callback,c=e.menuTheme,s=e.isDarkModeOn,m=z(c,"button",s);return a.a.createElement(f.Modal,{style:{color:"black",backgroundColor:"#e0e0e0"},header:t,open:l,options:{dismissible:!1,endingTop:"10%",inDuration:250,opacity:.4,outDuration:250,preventScrolling:!0,startingTop:"4%"},actions:[a.a.createElement(f.Button,{style:{backgroundColor:m,color:"white",marginRight:"1rem"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!0)}},o||"Accept"),a.a.createElement(f.Button,{style:{backgroundColor:m,color:"white"},flat:!0,modal:"close",node:"button",waves:"green",onClick:function(){i(!1)}},r||"Cancel")]},a.a.createElement("div",null,n))},Ye=function(e){var t,n=e.names,o=e.lifeCycleStage,r=e.winner,l=e.finishReason,i=e.indexToMove,c=e.timeControl,s=e.creatorStarts,m=e.isLargeScreen,u=e.menuTheme,d=e.isDarkModeOn,f=n[i];switch(o){case-2:t="Haven't tried to connect to the server yet";break;case-1:t="Waking the server up...";break;case 0:t="Waiting for player 2 to join";break;case 1:t="".concat(f," starts");break;case 2:case 3:t="".concat(f," to move");break;case 4:t="draw"===r?"The game ended in a draw "+{goal:"by the 1-move rule",agreement:"by agreement"}[l]:"".concat(n["creator"===r?0:1]," won ").concat({time:"on time",goal:"by reaching the goal",resign:"by resignation",abandon:"by abandonment"}[l]);break;default:console.error("stage should be in range [-2..4]")}var g=function(e){return Math.round(100*(e+Number.EPSILON))/100},h="";return 0===o&&s?h=n[0]:o>0&&(h=n[s?0:1]),a.a.createElement("div",{style:{backgroundColor:z(u,"container",d),display:"grid",gridTemplateColumns:"auto",gridTemplateRows:"1fr 1fr 1fr",alignItems:"center",padding:m?"15px 15px":"5px 15px",gridArea:"status"}},a.a.createElement("div",null,a.a.createElement("p",null,t)),a.a.createElement("div",null,c&&a.a.createElement("p",null,"Time control: ",g(c.duration),"+",g(c.increment))),a.a.createElement("div",null,a.a.createElement("p",null,"First move: "+h)))},Ue=function(e,t){return a.a.createElement("span",{style:{height:"10px",width:"10px",backgroundColor:e,borderRadius:"50%",display:"inline-block",border:"solid 1px black"},title:t})},Qe=function(e,t){return e?Ue("#67ff36","".concat(t," has the game open")):Ue("gray","".concat(t," does not have the game page open"))},Ke=function(e){var t=e.lifeCycleStage,n=e.names,o=e.timeLeft,r=e.indexToMove,l=e.isLargeScreen,i=e.scores,c=e.arePlayersPresent,s=e.menuTheme,m=e.boardTheme,u=e.isDarkModeOn,d=[Math.floor(o[0]/60),Math.floor(o[1]/60)],f=d[0],g=d[1],h=o[0]%60,p=o[1]%60,v=["".concat(f,":").concat(h<10?"0":"").concat(h),"".concat(g,":").concat(p<10?"0":"").concat(p)];t<0&&(v[0]="_:__",v[1]="_:__");var y=[!1,!1];t<4&&(y[r]=!0);var b=[!1,!1];3===t&&(0===r?o[0]<15&&(b[0]=!0):1===r&&o[1]<15&&(b[1]=!0));var w,k=0!==i[0]||0!==i[1],E=l?"18px":"14px",C={padding:w=l&&!k?"15px":l&&k?"12px":l||k?"6px":"8px",fontSize:E},T=[z(m,"timer1",u),z(m,"timer2",u),z(s,"container",u),z(m,"lowTime",u)],S=T[0],x=T[1],O=T[2],D=T[3];return a.a.createElement("div",{style:{backgroundColor:z(s,"container",u),display:"grid",gridTemplateColumns:k?"0.5fr 1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr 0.5fr":"1.7fr 0.2fr 1fr 1fr 0.2fr 1.7fr",gridTemplateRows:"auto",alignContent:"center",columnGap:w,padding:w,gridArea:"timer"}},k&&a.a.createElement("div",{style:C,className:"center"},i[0]),a.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:y[0]?S:O},className:"center truncate"+(y[0]?" z-depth-2":"")},n[0]),a.a.createElement("div",{style:C,className:"center"},Qe(c[0],n[0])),a.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:b[0]?D:O},className:"center"+(b[0]?" z-depth-2":"")},v[0]),a.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:b[1]?D:O},className:"center"+(b[1]?" z-depth-2":"")},v[1]),a.a.createElement("div",{style:C,className:"center"},Qe(c[1],n[1])),a.a.createElement("div",{style:{padding:w,fontSize:E,backgroundColor:y[1]?x:O},className:"center truncate"+(y[1]?" z-depth-2":"")},null===n[1]?"______":n[1]),k&&a.a.createElement("div",{style:C,className:"center"},i[1]))},Xe=a.a.createElement("div",null,a.a.createElement("h6",null,'To connect with your friend, share the game code in the top header with them and tell them to use it when clicking "Join Game" from the lobby. Click on the code to copy it to the clipboard.'),a.a.createElement("h6",null,"Rules of the game:"),a.a.createElement("h6",null,"The player who creates the game starts at the top left corner (color red). The player who joins the game starts at the top right (color blue). The goal of each player is to reach the ",a.a.createElement("em",null,"opposite")," corner from where they start. The player who gets there first wins."),a.a.createElement("h6",null,"Players move by clicking cells on the board. There are two types of cells: ground cells (the big squares) and walls (the thin rectangles in between ground cells). Each move consists of a total of two actions. One action can be building one wall or moving to an adjacent cell. A diagonal move counts as two actions."),a.a.createElement("h6",null,"Players can build walls to obstruct the opponent. Walls can be built anywhere as long as there always exists at least one way to get to their goal. You cannot go through your own walls either."),a.a.createElement("h6",null,"The remaining time for each player is shown next to their name. The clock of a player ticks down when it is their turn (after each player has moved once). The player who starts is chosen randomly. The name of the player to move next is highlighted with their color."),a.a.createElement("h6",null,"If it is your turn and you do a single action, like building a wall or moving to an adjacent cell, you can undo it by clicking the wall again or clicking a different ground cell, respectively. Once you choose 2 actions, the move becomes permanent."),a.a.createElement("h6",null,"During the opponent's turn, you can ",a.a.createElement("em",null,"premove"),", meaning choose a move that will be applied instantaneously when it is your turn."),a.a.createElement("h6",null,"Special rules:"),a.a.createElement("h6",null,"(1) no walls can be placed during the first move of each player."),a.a.createElement("h6",null,"(2) if the player who moved first reaches the goal first but the other player is at distance 1 or 2 from their goal, the game ends in a draw."),a.a.createElement("h6",null,"If you leave the game, you will be able to reenter this game as long as you don't create or join a new game.")),Ze=n(23),$e=n.n(Ze),et=function(e){return 0===e.index?"_______":function(e){if(1===e.length)return fe(e[0]);var t=Object(i.a)(e,2),n=t[0],o=t[1];return"Ground"===te(n)||"Ground"!==te(n)||n.c<o.c||n.c===o.c&&n.r>o.r?fe(n)+" "+fe(o):fe(o)+" "+fe(n)}(e.actions)},tt={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},nt=function(e){var t=e.moveHistory,n=e.creatorStarts,o=e.handleViewMove,r=e.viewIndex,l=e.height,i=e.menuTheme,c=e.boardTheme,s=e.isDarkModeOn,m=!Object(h.useMediaQuery)({query:"(hover: none)"}),u=[z(c,"move1",s),z(c,"move2",s),z(i,"container",s),z(c,"currentMove",s)],d=u[0],g=u[1],p=u[2],v=u[3],y={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:p};return a.a.createElement("div",{id:"movehistory",className:"center",style:{overflowY:"scroll",display:"block",height:l,MozUserSelect:"none",WebkitUserSelect:"none",msUserSelect:"none",userSelect:"none"}},a.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:y},"#"),a.a.createElement("th",{style:y},"Move"),a.a.createElement("th",{style:y},"Distance"),a.a.createElement("th",{style:y},"# Walls"))),a.a.createElement("tbody",null,t.map((function(e,l){var i;if(r===l&&l<t.length-1)i=v;else if(0===l)i=p;else{i=1===1+(l+(n?1:0))%2?d:g}return a.a.createElement("tr",{onClick:function(){return o(l)},style:{cursor:"pointer",backgroundColor:i},className:m?$e.a.hoveredMode:void 0,key:l},a.a.createElement("td",{style:tt},l),a.a.createElement("td",{style:tt},et(e)),a.a.createElement("td",{style:tt},e.distances[0]+" - "+e.distances[1]),a.a.createElement("td",{style:tt},e.wallCounts[0]+" - "+e.wallCounts[1]))})))))},ot=function(e){var t=e.lifeCycleStage,n=e.handleResign,o=e.handleOfferDraw,r=e.handleRequestTakeback,l=e.handleGiveExtraTime,i=e.moveHistory,c=e.clientRole,s=e.creatorStarts,m=e.handleViewMove,u=e.viewIndex,d=e.turnCount,f=e.handleSeeFirstMove,g=e.handleSeePreviousMove,h=e.handleSeeNextMove,p=e.handleSeeLastMove,v=e.handleToggleVolume,y=e.isVolumeOn,b=e.handleLeaveGame,w=e.handleIncreaseBoardSize,k=e.handleDecreaseBoardSize,E=e.zoomLevel,C=e.boardHeight,T=e.isOpponentPresent,S=e.menuTheme,x=e.boardTheme,O=e.isDarkModeOn,D=C-108-15-10,R=3===t||2===t&&s===("Creator"===c),j="Spectator"===c;return a.a.createElement("div",{style:{backgroundColor:z(S,"container",O),width:"100%",height:"auto",display:"grid",padding:"".concat(5,"px"),gridTemplateColumns:"repeat(4, 1fr)",gridTemplateRows:"".concat(36,"px 1fr ").concat(36,"px ").concat(36,"px"),columnGap:"".concat(5,"px"),rowGap:"".concat(5,"px"),gridArea:"panel"}},a.a.createElement(qe,{icon:"flag",tooltip:"Resign",modalTitle:"Resign",modalBody:"Are you sure you want to resign?",modalConfirmButtonText:"Resign",onClick:n,disabled:j||3!==t,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"local_florist",tooltip:"Offer Draw",modalTitle:"Offer Draw",modalBody:"Are you sure you want to offer a draw?",modalConfirmButtonText:"Offer draw",onClick:o,disabled:j||!T||3!==t,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"replay",tooltip:"Request takeback",onClick:function(){Z("A takeback request was sent to the opponent.",5e3),r()},disabled:j||!T||!R,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"add_alarm",tooltip:"Give 60 seconds",onClick:function(){Z("You added 60s to the opponent's clock.",5e3),l()},disabled:j||3!==t,menuTheme:S,isDarkModeOn:O}),a.a.createElement("div",{style:{gridColumnStart:"1",gridColumnEnd:"5"}},a.a.createElement(nt,{moveHistory:i,creatorStarts:s,handleViewMove:m,viewIndex:u,height:D,menuTheme:S,boardTheme:x,isDarkModeOn:O})),a.a.createElement(qe,{icon:"fast_rewind",onClick:f,disabled:t<=1||0===u,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"navigate_before",onClick:g,disabled:t<=1||0===u,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"navigate_next",onClick:h,disabled:t<=1||u===d,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"fast_forward",onClick:p,disabled:t<=1||u===d,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:y?"volume_up":"volume_off",tooltip:y?"Turn off sound effects":"Turn on sound effects",onClick:v,disabled:j,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"zoom_out",tooltip:"Decrease board size",onClick:k,disabled:0===E,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"zoom_in",tooltip:"Increase board size",onClick:w,disabled:10===E,menuTheme:S,isDarkModeOn:O}),a.a.createElement(qe,{icon:"home",tooltip:"Return to lobby",onClick:b,menuTheme:S,isDarkModeOn:O}))},at=new Q.a(X.a),rt=function(){at.play()},lt=Y.boardDims,it=function(e){var t=e.socket,n=e.clientParams,r=e.returnToLobby,l=e.isLargeScreen,c=e.menuTheme,s=e.boardTheme,m=e.isDarkModeOn,u=e.handleToggleDarkMode,d=e.handleToggleTheme,g=e.handleSetCookieId,h=Object(v.a)(["isVolumeOn","zoomLevel"]),p=Object(i.a)(h,2),b=p[0],w=p[1],k=Object(y.a)(function(e){var t={joinCode:null,timeControl:null,names:[null,null],tokens:["default","default"],gameWins:[0,0],opponentAbandoned:!1,arePlayersPresent:[!1,!1],creatorStarts:null,winner:"",finishReason:"",lifeCycleStage:-2,moveHistory:[{index:0,actions:[],grid:oe(he),playerPos:pe,timeLeft:[null,null],distances:[ie(oe(he),pe[0],ge[0]),ie(oe(he),pe[1],ge[1])],wallCounts:[0,0]}],clientRole:null,moveToSend:null,ghostAction:null,premoveActions:[],isVolumeOn:!1,isKeyPressed:!1,viewIndex:0,zoomLevel:5,waitingForPing:0,showDrawDialog:!1,showTakebackDialog:!1,showRematchDialog:!1};return Te(t,e),t}(b)),E=Object(i.a)(k,2),C=E[0],T=E[1];Object(o.useEffect)((function(){return t.once("gameCreated",(function(e){var t=e.joinCode,n=e.creatorStarts,o=e.cookieId;g(o),T((function(e){Oe(e,t,n)}))})),t.once("gameJoined",(function(e){var t=e.creatorName,n=e.creatorToken,o=e.timeControl,a=e.creatorStarts,r=e.cookieId,l=e.creatorPresent;g(r),T((function(e){De(e,t,n,o,a,l)}))})),t.once("requestedGame",(function(e){var t=e.game;T((function(e){!function(e,t){Se(e,t.timeControl,t.playerNames[0],t.playerTokens[0]),Oe(e,t.joinCode,t.creatorStarts),Re(e,t.playerNames[1],t.playerTokens[1]);for(var n=0;n<t.moveHistory.length;n++){var o=t.moveHistory[n].actions,a=t.moveHistory[n].remainingTime;je(e,o,a,n+1)}e.clientRole="Spectator",e.gameWins=t.gameWins,e.winner=t.winner,e.finishReason=t.finishReason,e.lifeCycleStage=4}(e,t)}))})),t.on("returnedToOngoingGame",(function(e){var t=e.ongoingGame,o=e.timeLeft;T((function(e){!function(e,t,n,o){if(!e.timeControl){"Creator"===(t===n.cookieIds[0]?"Creator":"Joiner")?(Se(e,n.timeControl,n.playerNames[0],n.playerTokens[0]),Oe(e,n.joinCode,n.creatorStarts),Re(e,n.playerNames[1],n.playerTokens[1])):(xe(e,n.joinCode,n.playerNames[1],n.playerTokens[1]),De(e,n.playerNames[0],n.playerTokens[0],n.timeControl,n.creatorStarts,!0)),e.arePlayersPresent=n.arePlayersPresent;for(var a=0;a<n.moveHistory.length;a++){var r=n.moveHistory[a].actions,l=n.moveHistory[a].remainingTime;je(e,r,l,a+1)}e.gameWins=n.gameWins,e.winner=n.winner,e.finishReason=n.finishReason;var i=ve(e);e.moveHistory[i].timeLeft=o,""!==n.winner?e.lifeCycleStage=4:0===o[0]?ze(e,1):0===o[1]&&ze(e,0)}}(e,n.cookieId,t,o),e.waitingForPing=0}))})),t.on("opponentReturned",(function(){T((function(e){e.arePlayersPresent["Creator"===e.clientRole?1:0]=!0,e.waitingForPing=0}))})),t.on("ongoingGameNotFound",(function(){Z("Couldn't find the game anymore.",5e3),r()})),t.on("gameJoinFailed",(function(){Z("There is no game with this code waiting for someone to join.",5e3),r()})),t.on("joinSelfGameFailed",(function(){Z("You cannot play against yourself. To play as both sides from the same browser, play one of the sides from an Incognito window.",12e3),r()})),t.on("gameNotFoundError",(function(){Z("There was an issue on the server and we couldn't reach the other player.",5e3),T((function(e){e.waitingForPing=0}))})),t.once("joinerJoined",(function(e){var t=e.joinerName,n=e.joinerToken;T((function(e){1!==e.lifeCycleStage&&(e.isVolumeOn&&rt(),Re(e,t,n),e.arePlayersPresent[1]=!0,e.waitingForPing=0)}))})),t.on("drawOffered",(function(){T((function(e){e.showDrawDialog=!0,e.waitingForPing=0}))})),t.on("drawRejected",(function(){Z("The opponent declined the draw offer.",5e3),T((function(e){e.waitingForPing=0}))})),t.on("drawAccepted",(function(){Z("The opponent accepted the draw offer.",5e3),T((function(e){Le(e,"agreement"),e.waitingForPing=0}))})),t.on("takebackRequested",(function(){T((function(e){e.showTakebackDialog=!0,e.waitingForPing=0}))})),t.on("takebackRejected",(function(){Z("The opponent declined the takeback request.",5e3),T((function(e){e.waitingForPing=0}))})),t.on("takebackAccepted",(function(){Z("The opponent agreed to the takeback.",5e3),T((function(e){var t="Creator"===e.clientRole;Ne(e,t),e.waitingForPing=0}))})),t.on("rematchOffered",(function(){T((function(e){e.showRematchDialog=!0,e.waitingForPing=0}))})),t.on("rematchRejected",(function(){Z("The opponent declined the rematch offer.",5e3),T((function(e){e.waitingForPing=0}))})),t.on("rematchAccepted",(function(){Z("The opponent accepted the rematch offer.",5e3),T((function(e){e.isVolumeOn&&rt(),Be(e),e.waitingForPing=0}))})),t.on("extraTimeReceived",(function(){Z("The opponent added 60s to your clock.",5e3),T((function(e){var t="Creator"===e.clientRole?0:1;He(e,t),e.waitingForPing=0}))})),t.on("resigned",(function(){Z("The opponent resigned.",5e3),T((function(e){e.isVolumeOn&&rt();var t="Creator"!==e.clientRole;Ae(e,t),e.waitingForPing=0}))})),t.on("moved",(function(e){var t=e.actions,n=e.moveIndex,o=e.remainingTime;T((function(e){console.log("move ".concat(n," received (").concat(o,"s)")),e.isVolumeOn&&rt(),je(e,t,o,n),e.waitingForPing=0}))})),t.on("leftGame",(function(){T((function(e){e.arePlayersPresent["Creator"===e.clientRole?1:0]=!1,e.waitingForPing=0}))})),t.on("abandonedGame",(function(){Z("The opponent abandoned the game.",5e3),T((function(e){!function(e,t){4!==e.lifeCycleStage&&(e.lifeCycleStage=4,e.winner=t?"joiner":"creator",e.gameWins[t?1:0]+=1,e.finishReason="abandon",We(e))}(e,"Creator"!==e.clientRole),e.waitingForPing=0}))})),t.on("pongFromServer",(function(){T((function(e){e.waitingForPing=0}))})),function(){t.removeAllListeners()}}),[t,T,r,g,n.cookieId]),Object(o.useEffect)((function(){-2===C.lifeCycleStage&&("Creator"===n.clientRole?(T((function(e){Se(e,n.timeControl,n.name,n.token),e.arePlayersPresent[0]=!0})),t.emit("createGame",{name:n.name,timeControl:n.timeControl,token:n.token,cookieId:n.cookieId})):"Joiner"===n.clientRole?(T((function(e){xe(e,n.joinCode,n.name,n.token),e.arePlayersPresent[1]=!0})),t.emit("joinGame",{joinCode:n.joinCode,name:n.name,token:n.token,cookieId:n.cookieId})):"Spectator"===n.clientRole?t.emit("getGame",{gameId:n.gameId}):"Returner"===n.clientRole?t.emit("returnToOngoingGame",{cookieId:n.cookieId}):console.error("unknown client role",n.clientRole))}));var S=function(){t.emit("leaveGame"),r()};Object(o.useEffect)((function(){var e=setInterval((function(){T((function(e){!function(e){if(3===e.lifeCycleStage){var t=we(e),n=ve(e);e.moveHistory[n].timeLeft[t]-=1,0===e.moveHistory[n].timeLeft[t]&&ze(e,0===t?1:0)}}(e)}))}),1e3);return function(){return clearInterval(e)}}),[T]),Object(o.useEffect)((function(){var e=setInterval((function(){3===C.lifeCycleStage&&(1===C.waitingForPing?t.emit("pingServer"):2===C.waitingForPing&&Z("The server is not responding. The game is probably lost. Sorry for the inconvenience.",8e3),T((function(e){e.waitingForPing=(e.waitingForPing+1)%3})))}),5e3);return function(){return clearInterval(e)}}),[t,C.lifeCycleStage,C.waitingForPing,T]);var x=function(e){T((function(t){var n=ye(t)===("Creator"===t.clientRole);Me(t,e,n,!0)}))};Object(o.useEffect)((function(){C.moveToSend&&(t.emit("move",C.moveToSend),T((function(e){e.moveToSend=null})))})),Object(o.useEffect)((function(){"Spectator"!==C.clientRole&&("goal"===C.finishReason&&t.emit("playerReachedGoal",{winner:C.winner}),"time"===C.finishReason&&t.emit("playerWonOnTime",{winner:C.winner}))}),[t,C.clientRole,C.winner,C.finishReason]);Object(o.useEffect)((function(){return window.addEventListener("keydown",O),window.addEventListener("keyup",D),function(){window.removeEventListener("keydown",O),window.removeEventListener("keyup",D)}}));var O=function(e){var t=e.key;if(!C.isKeyPressed)if(T((function(e){e.isKeyPressed=!0})),"m"!==t)if(C.viewIndex<ve(C)||4===C.lifeCycleStage)"ArrowDown"===t||"ArrowRight"===t?C.viewIndex<ve(C)&&T((function(e){e.viewIndex+=1})):"ArrowUp"!==t&&"ArrowLeft"!==t||C.viewIndex>0&&T((function(e){e.viewIndex-=1}));else{var n;if(C.ghostAction&&"Ground"===ke(C.ghostAction))n=C.ghostAction;else{var o=ve(C);n=C.moveHistory[o].playerPos[we(C)]}if("ArrowDown"===t)n={r:n.r+2,c:n.c};else if("ArrowUp"===t)n={r:n.r-2,c:n.c};else if("ArrowLeft"===t)n={r:n.r,c:n.c-2};else{if("ArrowRight"!==t)return;n={r:n.r,c:n.c+2}}x(n)}else P()},D=function(){T((function(e){e.isKeyPressed=!1}))},R=function(e){e<0||e>ve(C)||T((function(t){t.viewIndex!==e&&(e>ve(t)||(t.viewIndex=e,t.ghostAction=null,t.premoveActions=[]))}))};Object(o.useEffect)((function(){var e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight}),[C.moveHistory.length]);var j,G,P=function(){w("isVolumeOn",C.isVolumeOn?"false":"true",{path:"/"}),T((function(e){e.isVolumeOn=!e.isVolumeOn}))},M=function(e){e.preventDefault(),S()};if(Object(o.useEffect)((function(){return window.history.pushState(null,null,window.location.pathname),window.addEventListener("popstate",M),function(){return window.removeEventListener("popstate",M)}})),4===C.lifeCycleStage){var I=Object(i.a)(C.moveHistory[C.viewIndex].timeLeft,2);j=I[0],G=I[1]}else{var W=ve(C),L=Object(i.a)(C.moveHistory[W].timeLeft,2);j=L[0],G=L[1]}var A,N,B,H=l?[Y.groundSize,Y.wallWidth]:[Y.smallScreenGroundSize,Y.smallScreenWallWidth],_=Object(i.a)(H,2),F=_[0],q=_[1],V=Math.pow(1.1,C.zoomLevel-5),J=F*V,U=q*V,Q=U*(lt.h-1)/2+J*(lt.h+1)/2,K=U*(lt.w-1)/2+J*(lt.w+1)/2,X=l?15:6;if(l){A="".concat(100,"px ").concat(Q,"px"),N="".concat(K,"px ").concat(360,"px"),B="'timer status' 'board panel'"}else{A="".concat(50,"px ").concat(Q,"px ").concat(80,"px ").concat(Q,"px"),N="".concat(K,"px"),B="'timer' 'board' 'status' 'panel'"}var $=C.moveHistory[C.viewIndex].playerPos,ee=function(e){var t,n=e.creatorStarts,o=e.moveHistory[e.viewIndex].playerPos;if(0===e.viewIndex)t=null;else if(1===e.viewIndex)t=Y.initialPlayerPos[n?0:1];else if(2===e.viewIndex)t=Y.initialPlayerPos[n?1:0];else{var a=e.moveHistory[e.viewIndex-2].playerPos;be(e)?ne(a[1],o[1])||(t=a[1]):ne(a[0],o[0])||(t=a[0])}return t}(C),te=C.viewIndex>0?C.moveHistory[C.viewIndex].actions:[];return a.a.createElement("div",null,a.a.createElement(Ve,{context:"Spectator"===C.clientRole?"Spectator":"Player",joinCode:C.joinCode,helpText:Xe,handleLeaveGame:S,isLargeScreen:l,menuTheme:c,isDarkModeOn:m,handleToggleDarkMode:u,handleToggleTheme:d}),a.a.createElement("div",{style:{display:"grid",gridTemplateRows:A,gridTemplateColumns:N,gridTemplateAreas:B,columnGap:"".concat(X,"px"),rowGap:"".concat(X,"px"),margin:"".concat(X,"px"),justifyContent:"center",alignContent:"center"}},a.a.createElement(Ke,{lifeCycleStage:C.lifeCycleStage,names:C.names,indexToMove:we(C),timeLeft:[j,G],isLargeScreen:l,scores:C.gameWins,arePlayersPresent:C.arePlayersPresent,menuTheme:c,boardTheme:s,isDarkModeOn:m}),a.a.createElement(Ye,{lifeCycleStage:C.lifeCycleStage,names:C.names,indexToMove:we(C),winner:C.winner,finishReason:C.finishReason,timeControl:C.timeControl,creatorStarts:C.creatorStarts,isLargeScreen:l,menuTheme:c,isDarkModeOn:m}),a.a.createElement(_e,{creatorToMove:be(C),grid:C.moveHistory[C.viewIndex].grid,playerPos:$,goals:Y.goals,ghostAction:C.ghostAction,premoveActions:C.premoveActions,lastActions:te,tracePos:ee,handleClick:function(e){return x(e)},groundSize:J,wallWidth:U,menuTheme:c,boardTheme:s,isDarkModeOn:m,tokens:C.tokens}),a.a.createElement(ot,{lifeCycleStage:C.lifeCycleStage,handleResign:function(){t.emit("resign"),T((function(e){Ae(e,"Creator"===e.clientRole)}))},handleOfferDraw:function(){t.emit("offerDraw")},handleRequestTakeback:function(){t.emit("requestTakeback")},handleGiveExtraTime:function(){t.emit("giveExtraTime"),T((function(e){var t="Creator"===e.clientRole?1:0;He(e,t)}))},moveHistory:C.moveHistory,clientRole:C.clientRole,creatorStarts:C.creatorStarts,handleViewMove:R,viewIndex:C.viewIndex,turnCount:ve(C),handleSeeFirstMove:function(){R(0),document.getElementById("movehistory").scrollTop=0},handleSeePreviousMove:function(){return R(C.viewIndex-1)},handleSeeNextMove:function(){return R(C.viewIndex+1)},handleSeeLastMove:function(){R(ve(C));var e=document.getElementById("movehistory");e.scrollTop=e.scrollHeight},handleToggleVolume:P,isVolumeOn:C.isVolumeOn,handleLeaveGame:S,menuTheme:c,boardTheme:s,isDarkModeOn:m,handleIncreaseBoardSize:function(){C.zoomLevel<10&&w("zoomLevel",C.zoomLevel+1,{path:"/"}),T((function(e){e.zoomLevel<10&&(e.zoomLevel+=1)}))},handleDecreaseBoardSize:function(){C.zoomLevel>0&&w("zoomLevel",C.zoomLevel-1,{path:"/"}),T((function(e){e.zoomLevel>0&&(e.zoomLevel-=1)}))},zoomLevel:C.zoomLevel,boardHeight:Q,isOpponentPresent:Ee(C)})),4===C.lifeCycleStage&&"Spectator"!==C.clientRole&&a.a.createElement(f.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},a.a.createElement(f.Col,{className:"center",s:12},a.a.createElement(f.Button,{large:!0,style:{backgroundColor:z(c,"importantButton",m)},node:"button",waves:"light",onClick:function(){Z("Rematch offer sent.",5e3),t.emit("offerRematch")},disabled:!Ee(C)},"Rematch"))),a.a.createElement("div",{style:{height:"100%"}}),a.a.createElement(Je,{isOpen:C.showDrawDialog,title:"Draw offer received",body:"The opponent offered a draw.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(t.emit("acceptDraw"),T((function(e){Le(e,"agreement")}))):(t.emit("rejectDraw"),T((function(e){e.showDrawDialog=!1})))},menuTheme:c,isDarkModeOn:m}),a.a.createElement(Je,{isOpen:C.showRematchDialog,title:"Rematch offer received",body:"The opponent would like a rematch.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(t.emit("acceptRematch"),T((function(e){Be(e)}))):(t.emit("rejectRematch"),T((function(e){e.showRematchDialog=!1})))},menuTheme:c,isDarkModeOn:m}),a.a.createElement(Je,{isOpen:C.showTakebackDialog,title:"Takeback request received",body:"The opponent requested a takeback. If you accept, their last move will be undone.",acceptButtonText:"Accept",rejectButtonText:"Decline",callback:function(e){e?(Z("The last move played on the board has been undone.",5e3),t.emit("acceptTakeback"),T((function(e){var t="Joiner"===e.clientRole;Ne(e,t)}))):(t.emit("rejectTakeback"),T((function(e){e.showTakebackDialog=!1})))},menuTheme:c,isDarkModeOn:m}))},ct=function(e){var t=e.text,n=e.tooltip,o=e.onClick,r=e.menuTheme,l=e.isDarkModeOn;return a.a.createElement(f.Button,{style:{backgroundColor:z(r,"button",l),color:"#FFFFFF"},node:"button",waves:"light",onClick:o,tooltip:n},t)},st=["school","default","face","outlet","mood","mood_bad","child_care","pets","whatshot","toys","spa","stop","star","lens","favorite","visibility","group_work","flare","ac_unit","camera","casino","directions_boat","directions_bus","directions_car","event_seat","adb","bug_report"],mt=function(e){var t=e.playerName,n=e.handlePlayerName,r=e.duration,l=e.handleDuration,i=e.increment,c=e.handleIncrement,s=e.joinCode,m=e.handleJoinCode,u=e.handleCreateGame,d=e.handleJoinGame,g=e.handleRefreshName,h=e.token,p=e.handleToken,v=e.isLargeScreen,y=e.menuTheme,b=e.isDarkModeOn;Object(o.useEffect)((function(){return window.addEventListener("keydown",w),function(){window.removeEventListener("keydown",w)}}));var w=function(e){"Enter"===e.key&&(s.length>0?d():(Z("Created new game",5e3),u()))},k=a.a.createElement("div",{style:{fontSize:"30px"}},a.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"face"),v?" / ":"/",a.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},"outlet"));return a.a.createElement("div",{className:"container",style:{marginTop:"2rem",backgroundColor:z(y,"container",b)}},a.a.createElement(f.Row,{className:"valign-wrapper"},a.a.createElement(f.Col,{className:"center",s:4,m:4},a.a.createElement("span",{style:{fontSize:"23px"}},v?"Your name:":"Name:")),a.a.createElement(f.Col,{s:6,m:3},a.a.createElement(f.TextInput,{id:"nameInput",value:t,onChange:n})),a.a.createElement(f.Col,{s:1,m:1},a.a.createElement(f.Button,{node:"button",waves:"light",small:!0,floating:!0,style:{color:"white",backgroundColor:z(y,"button",b)},icon:a.a.createElement(f.Icon,null,"refresh"),onClick:g,tooltip:"Get a new name"})),a.a.createElement(f.Col,{s:1,m:4})),a.a.createElement(f.Row,{className:"valign-wrapper"},a.a.createElement(f.Col,{className:"center",s:4,m:4},a.a.createElement("span",{style:{fontSize:"23px"}},v?"Your token:":"Token:")),a.a.createElement(f.Col,{s:3,m:2,className:"center"},"default"===h?k:a.a.createElement("div",{className:"white-text",style:{fontSize:"30px"}},a.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},h))),a.a.createElement(f.Col,{s:4,m:4},a.a.createElement("div",null,a.a.createElement(f.Dropdown,{id:"Dropdown_6",options:{alignment:"left",autoTrigger:!0,closeOnClick:!0,constrainWidth:!0,container:null,coverTrigger:!0,hover:!1,inDuration:150,onCloseEnd:null,onCloseStart:null,onOpenEnd:null,onOpenStart:null,outDuration:250},trigger:a.a.createElement(f.Button,{node:"button",style:{backgroundColor:z(y,"button",b)}},"Change")},st.map((function(e){return a.a.createElement("div",{style:{width:"100%",color:"white",backgroundColor:z(y,"button",b)},key:e,node:"button",onClick:function(){return p(e)}},a.a.createElement("div",{className:"center",style:{display:"flex",flexDirection:"column",justifyContent:"center",padding:"4px 0"}},"default"===e?k:a.a.createElement("i",{className:"material-icons white-text",style:{height:"100%"}},e)))}))))),a.a.createElement(f.Col,{s:1,m:2})),a.a.createElement(f.Row,{className:"valign-wrapper"},a.a.createElement(f.Col,{className:"center",s:5,m:4},a.a.createElement(ct,{text:"Create Game",onClick:u,menuTheme:y,isDarkModeOn:b})),a.a.createElement(f.Col,{s:2,m:2,style:{paddingRight:"0"}},a.a.createElement(f.TextInput,{id:"durationInput",label:"Duration",value:"".concat(r),onChange:l})),a.a.createElement(f.Col,{s:1,m:1,style:{paddingLeft:"0"}},"m"),a.a.createElement(f.Col,{s:2,m:2,style:{paddingRight:"0"}},a.a.createElement(f.TextInput,{id:"incrementInput",label:"Increment",value:"".concat(i),onChange:c})),a.a.createElement(f.Col,{s:1,m:1,style:{paddingLeft:"0"}},"s"),a.a.createElement(f.Col,{s:1,m:2})),a.a.createElement(f.Row,{className:"valign-wrapper"},a.a.createElement(f.Col,{className:"center",s:5,m:4},a.a.createElement(ct,{text:"Join Game",onClick:d,menuTheme:y,isDarkModeOn:b})),a.a.createElement(f.Col,{s:6,m:5},a.a.createElement(f.TextInput,{id:"joinInput",placeholder:"Write game code here...",value:"".concat(s),onChange:m})),a.a.createElement(f.Col,{s:1,m:3})))},ut=a.a.createElement("div",null,a.a.createElement("h6",null,"This is the lobby. From here, you can create games that your friends can join, or join a friend's game."),a.a.createElement("h6",null,"When you create a game, you can choose the ",a.a.createElement("em",null,"duration")," (per player) and a time",a.a.createElement("em",null,"increment")," that is added to each player after they move. Once you create a game, a ",a.a.createElement("em",null,"game code")," will appear at the top. Share this code with your friend to play with them."),a.a.createElement("h6",null,'To join a friend\'s game, write the code they give you in the box next to the "Join game" button and click it.'),a.a.createElement("h6",null,"To get a feel for the game, you can watch some of the recent games listed in the lobby."),a.a.createElement("h6",null,"A random ",a.a.createElement("em",null,"username")," has been chosen for you, but you can change it. You can also choose the look of your token.")),dt=a.a.createElement("div",null,a.a.createElement("h6",null,"Wallwars is an online 2-player strategy game. The player who gets to their goal before first wins. You can place walls to reshape the terrain to your advantage."),a.a.createElement("h6",null,"WallWars is inspired by board games like Blockade and Quoridor. The main difference is that in WallWars there is no limit to how many walls you can place, and moves are more flexible (for instance, you can move and place a wall in the same turn)."),a.a.createElement("h6",null,"The source code is available at https://github.com/nmamano/WallWars")),ft=function(e){return e.nextMove%2===(e.game.creatorStarts?0:1)},gt=function(e){var t=e.socket,n=e.isLargeScreen,r=e.menuTheme,l=e.boardTheme,c=e.isDarkModeOn,s=e.handleViewGame,m=Object(y.a)({needToRequestGame:!0,finishedGameWait:3,game:null,nextMove:0,grid:oe(Y.boardDims),playerPos:Y.initialPlayerPos,prevPos:[null,null]}),u=Object(i.a)(m,2),d=u[0],f=u[1];Object(o.useEffect)((function(){var e=setInterval((function(){if(d.needToRequestGame)return f((function(e){e.needToRequestGame=!1})),void t.emit("getRandomGame");d.game&&(d.game.moveHistory?d.nextMove!==d.game.moveHistory.length?f((function(e){if(e.game&&e.game.moveHistory&&e.nextMove!==e.game.moveHistory.length){for(var t=ft(e)?0:1,n=e.game.moveHistory[e.nextMove].actions,o=0;o<n.length;o++){var a=n[o];"Ground"===te(a)?(e.prevPos[t]=e.playerPos[t],e.playerPos[t]=a):e.grid[a.r][a.c]=t+1}e.nextMove++}})):f((function(e){e.finishedGameWait>0?e.finishedGameWait--:(e.needToRequestGame=!0,e.finishedGameWait=3,e.game=null,e.nextMove=0,e.grid=oe(Y.boardDims),e.playerPos=Y.initialPlayerPos,e.prevPos=[null,null])})):console.log("Error: game does not have a move history"))}),2e3);return function(){return clearInterval(e)}})),Object(o.useEffect)((function(){t.on("requestedRandomGame",(function(e){var t=e.game;f((function(e){e.game=t}))}))}),[t,f,d.needToRequestGame]);var g=[];d.nextMove>0&&(g=d.game.moveHistory[d.nextMove-1].actions);var h=n?Y.groundSize:Y.smallScreenGroundSize,p=n?Y.wallWidth:Y.smallScreenWallWidth,v=d.game&&ft(d),b=null;return 1!==g.length&&(2!==g.length||"Ground"!==te(g[0])&&"Ground"!==te(g[1]))||(b=v?d.prevPos[1]:d.prevPos[0]),a.a.createElement(_e,{playerColors:Y.playerColors,grid:d.grid,playerPos:d.playerPos,goals:Y.goals,ghostAction:null,creatorToMove:v,premoveActions:[],lastActions:g,tracePos:b,handleClick:function(){d.game&&s(d.game._id)},groundSize:h,wallWidth:p,menuTheme:r,boardTheme:l,isDarkModeOn:c,tokens:d.game?d.game.playerTokens:["default","default"]})},ht=function(e){return Math.round(100*(e+Number.EPSILON))/100},pt=function(e){return ht(e.duration)+"+"+ht(e.increment)},vt=function(e){return"creator"===e.winner?"<":"draw"===e.winner?"=":">"},yt=new Map;function bt(e,t){if(!e)return"-";var n=(new Date).getTime(),o=new Date(e).getTime(),a=Math.floor((n-o)/1e3),r=Math.floor(a/2592e3);if(r>1)return r+(t?" months":"mth")+" ago";if(1===r)return"1"+(t?" month":"mth")+" ago";var l=Math.floor(a/86400);if(l>1)return l+(t?" days":"d")+" ago";if(1===l)return"1"+(t?" day":"d")+" ago";var i=Math.floor(a/3600);if(i>1)return i+(t?" hours":"h")+" ago";if(1===i)return"1"+(t?" hour":"h")+" ago";var c=Math.floor(a/60);return c>1?c+(t?" minutes":"m")+" ago":1===c?"1"+(t?" minute":"m")+" ago":"Just now"}var wt=function(e){var t=e.recentGames,n=e.isLargeScreen,o=e.menuTheme,r=e.isDarkModeOn,l=e.handleViewGame,c=[z(o,"recentGamesBackground",r),z(o,"recentGamesAlternate",r),z(o,"container",r)],s=c[0],m=c[1],u={position:"sticky",top:"0px",paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0",backgroundColor:c[2]},d={paddingTop:"0.15rem",paddingBottom:"0.15rem",borderRadius:"0"},g="1px solid ".concat(z(o,"container",r));return n?a.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",border:g,backgroundColor:z(o,"recentGamesBackground",r)}},a.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:u},"Time"),a.a.createElement("th",{style:u},"Player 1"),a.a.createElement("th",{style:u}),a.a.createElement("th",{style:u},"Player 2"),a.a.createElement("th",{style:u},"Distance"),a.a.createElement("th",{style:u},"Turns"),a.a.createElement("th",{style:u},"Date"))),a.a.createElement("tbody",null,t&&t.map((function(e,t){var n=function(e){if(yt.size>1e3&&yt.clear(),yt.has(e._id))return yt.get(e._id);for(var t=oe(Y.boardDims),n=ee()(Y.initialPlayerPos),o=e.creatorStarts?0:1,a=0;a<e.moveHistory.length;a++){for(var r=e.moveHistory[a].actions,l=0;l<r.length;l++){var c=r[l];"Ground"===te(c)?n[o]=c:t[c.r][c.c]=o+1}o=(o+1)%2}var s=Object(i.a)(Y.goals,2),m=s[0],u=s[1],d=[ie(t,n[0],m),ie(t,n[1],u)],f=d[0],g=d[1];return yt.set(e._id,[f,g]),[f,g]}(e),o=Object(i.a)(n,2),r=o[0],c=o[1];return a.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?s:m},className:$e.a.hoveredGame,key:t},a.a.createElement("td",{style:d},pt(e.timeControl)),a.a.createElement("td",{style:d},e.playerNames[0]),a.a.createElement("td",{style:d},vt(e)),a.a.createElement("td",{style:d},e.playerNames[1]),a.a.createElement("td",{style:d},r+" - "+c),a.a.createElement("td",{style:d},e.moveHistory.length),a.a.createElement("td",{style:d},bt(e.startDate,!0)))}))))):a.a.createElement("div",{className:"center",style:{overflowY:"scroll",display:"block",height:"100%",border:g}},a.a.createElement(f.Table,{centered:!0,style:{width:"100%"}},a.a.createElement("thead",null,a.a.createElement("tr",null,a.a.createElement("th",{style:u},"Time"),a.a.createElement("th",{style:u},"Player 1"),a.a.createElement("th",{style:u},"Win"),a.a.createElement("th",{style:u},"Player 2"),a.a.createElement("th",{style:u},"Date"))),a.a.createElement("tbody",null,t&&t.map((function(e,t){return a.a.createElement("tr",{onClick:function(){return l(e._id)},style:{cursor:"pointer",backgroundColor:t%2?s:m},className:$e.a.hoveredGame,key:t},a.a.createElement("td",{style:d},pt(e.timeControl)),a.a.createElement("td",{style:d},e.playerNames[0]),a.a.createElement("td",{style:d},vt(e)),a.a.createElement("td",{style:d},e.playerNames[1]),a.a.createElement("td",{style:d},bt(e.startDate,!1)))})))))},kt=function(){return Object(g.b)({dictionaries:[g.a],length:1}).slice(0,9)},Et=function(e){var t=e.socket,n=Object(v.a)(["playerName","token","duration","increment","cookieId","isDarkModeOn","menuTheme"]),r=Object(i.a)(n,2),l=r[0],c=r[1],s=Object(o.useState)(l.playerName||kt()),m=Object(i.a)(s,2),u=m[0],d=m[1],g=Object(o.useState)(l.token||"default"),b=Object(i.a)(g,2),w=b[0],k=b[1],E=Object(o.useState)(l.duration||5),C=Object(i.a)(E,2),T=C[0],S=C[1],x=Object(o.useState)(l.increment||5),O=Object(i.a)(x,2),D=O[0],R=O[1],j=Object(o.useState)(""),G=Object(i.a)(j,2),P=G[0],M=G[1],I=Object(o.useState)(!1),W=Object(i.a)(I,2),L=W[0],A=W[1],N=Object(o.useState)(!1),B=Object(i.a)(N,2),H=B[0],_=B[1],q=Object(o.useState)(null),J=Object(i.a)(q,2),U=J[0],Q=J[1],K=Object(o.useState)(!(!l.isDarkModeOn||"true"!==l.isDarkModeOn)),X=Object(i.a)(K,2),$=X[0],ee=X[1],te=Object(o.useState)(l.menuTheme&&"green"===l.menuTheme?"green":"blue"),ne=Object(i.a)(te,2),oe=ne[0],ae=ne[1],re=Object(y.a)({games:[],numGamesToRequest:16}),le=Object(i.a)(re,2),ie=le[0],ce=le[1],se=function(e){Q({clientRole:"Spectator",gameId:e}),_(!1),A(!0)},me=function(){c("isDarkModeOn",$?"false":"true",{path:"/"}),ee(!$)},ue=function(){var e="green"===oe?"blue":"green";c("menuTheme",e,{path:"/"}),ae(e)};Object(o.useEffect)((function(){l.cookieId&&"undefined"!==l.cookieId&&!H&&t.emit("checkHasOngoingGame",{cookieId:l.cookieId})})),Object(o.useEffect)((function(){t.on("respondHasOngoingGame",(function(e){var t=e.res;L||_(t)}))})),Object(o.useEffect)((function(){document.body.style.backgroundColor=z(oe,"background",$),document.body.style.backgroundImage="blue"===oe?"url('".concat($?F.a:V.a,"')"):"none"}),[$,oe]),Object(o.useEffect)((function(){0===ie.numGamesToRequest||ie.numGamesToRequest>100||(ce((function(e){e.numGamesToRequest=0})),t.emit("getRecentGames",{count:ie.numGamesToRequest}))}),[t,ie,ce]),Object(o.useEffect)((function(){t.once("requestedRecentGames",(function(e){var t=e.games;ce((function(e){e.games=t,e.numGamesToRequest=2*t.length}))}))}),[t,ce,ie.numGamesToRequest]);var de,fe,ge,he=Object(h.useMediaQuery)({query:"(min-width: 990px)"}),pe=Y.boardDims,ve=he?[Y.groundSize,Y.wallWidth]:[Y.smallScreenGroundSize,Y.smallScreenWallWidth],ye=Object(i.a)(ve,2),be=ye[0],we=ye[1],ke=we*(pe.h-1)/2+be*(pe.h+1)/2,Ee=we*(pe.w-1)/2+be*(pe.w+1)/2,Ce=he?15:6;return Object(h.useMediaQuery)({query:"(min-width: 1300px)"})?(de="".concat(40,"px ").concat(ke,"px"),fe="".concat(Ee,"px ").concat(Ee,"px"),ge="'showcaseTitle recentTitle' 'gameShowcase recentGameList'"):(de="".concat(40,"px ").concat(ke,"px ").concat(40,"px ").concat(ke,"px"),fe="".concat(Ee,"px"),ge="'showcaseTitle' 'gameShowcase' 'recentTitle' 'recentGameList'"),a.a.createElement("div",{style:{paddingBottom:"2rem"}},a.a.createElement(p.b,null),L&&a.a.createElement(it,{socket:t,clientParams:U,returnToLobby:function(){A(!1),_(!1),ce((function(e){e.numGamesToRequest=16})),Q(null),M("")},isLargeScreen:he,menuTheme:oe,boardTheme:"monochromeBoard",isDarkModeOn:$,handleToggleDarkMode:me,handleToggleTheme:ue,handleSetCookieId:function(e){c("cookieId",e,{path:"/"})}}),!L&&a.a.createElement("div",null,a.a.createElement(Ve,{context:"Lobby",helpText:ut,aboutText:dt,isLargeScreen:he,menuTheme:oe,isDarkModeOn:$,handleToggleDarkMode:me,handleToggleTheme:ue}),a.a.createElement(mt,{playerName:u,handlePlayerName:function(e){d(e.target.value.slice(0,9))},duration:T,handleDuration:function(e){return S(e.target.value)},increment:D,handleIncrement:function(e){return R(e.target.value)},joinCode:P,handleJoinCode:function(e){return M(e.target.value)},handleCreateGame:function(){var e=[parseFloat(T),parseFloat(D)],t=e[0],n=e[1];isNaN(t)||t<.1?(t=5/60,Z("Invalid duration, using 5s instead",5e3)):t>120?(t=120,Z("Duration too long, using 2h instead",5e3)):c("duration",t,{path:"/"}),isNaN(n)||n<0?(n=0,Z("Invalid increment, using 0s instead",5e3)):n>300?(n=300,Z("Increment too large, using 5m instead",5e3)):c("increment",n,{path:"/"});var o=u;""===o?o="Anon":c("playerName",o,{path:"/"}),Q({clientRole:"Creator",timeControl:{duration:t,increment:n},name:o,token:w,cookieId:l.cookieId?l.cookieId:"undefined"}),_(!1),A(!0)},handleJoinGame:function(){var e=u;""===e?e="Anon":c("playerName",e,{path:"/"}),Q({clientRole:"Joiner",joinCode:P,name:e,token:w,cookieId:l.cookieId?l.cookieId:"undefined"}),_(!1),A(!0)},handleRefreshName:function(){d(kt())},token:w,handleToken:function(e){k(e),c("token",e,{path:"/"})},isLargeScreen:he,menuTheme:oe,isDarkModeOn:$}),H&&l.cookieId&&"undefined"!==l.cookieId&&a.a.createElement(f.Row,{className:"valign-wrapper",style:{marginTop:"1rem"}},a.a.createElement(f.Col,{className:"center",s:12},a.a.createElement(f.Button,{large:!0,style:{backgroundColor:z(oe,"importantButton",$)},node:"button",waves:"light",onClick:function(){Q({clientRole:"Returner",cookieId:l.cookieId}),_(!1),A(!0)}},"Return to game"))),a.a.createElement("div",{style:{display:"grid",gridTemplateRows:de,gridTemplateColumns:fe,gridTemplateAreas:ge,columnGap:"".concat(2*Ce,"px"),rowGap:"".concat(Ce,"px"),margin:"".concat(Ce,"px"),justifyContent:"center",alignContent:"center"}},a.a.createElement("div",{style:{gridArea:"showcaseTitle",alignSelf:"center",justifySelf:"center",fontSize:"20px"},title:"Random games already played"},"Game Showcase"),a.a.createElement("div",{style:{gridArea:"gameShowcase"}},a.a.createElement(gt,{socket:t,isLargeScreen:he,menuTheme:oe,boardTheme:"monochromeBoard",isDarkModeOn:$,handleViewGame:se})),a.a.createElement("div",{style:{gridArea:"recentTitle",alignSelf:"center",justifySelf:"center",fontSize:"20px"}},"Recent Games"),a.a.createElement("div",{style:{gridArea:"recentGameList"}},a.a.createElement(wt,{recentGames:ie.games,isLargeScreen:he,menuTheme:oe,isDarkModeOn:$,handleViewGame:se})))))},Ct=function(){console.log("connecting to backend at ".concat("https://wallwars.herokuapp.com/"));var e=Object(o.useState)(u()("https://wallwars.herokuapp.com/")),t=Object(i.a)(e,1)[0];return a.a.createElement(a.a.StrictMode,null,a.a.createElement(d.a,null,a.a.createElement(c.a,null,a.a.createElement(s.d,null,a.a.createElement(s.b,{path:"/wallwars/index.html",exact:!0},a.a.createElement(Et,{socket:t})),a.a.createElement(s.a,{to:"/wallwars/index.html"})))))};l.a.render(a.a.createElement(Ct,null),document.getElementById("root"))},23:function(e,t,n){e.exports={hoveredMode:"hoverHighlight_hoveredMode__1R18t",hoveredGame:"hoverHighlight_hoveredGame__3lWju"}},33:function(e,t,n){e.exports=n.p+"static/media/moveSound.6df49e4b.mp3"},73:function(e,t,n){e.exports=n.p+"static/media/blueBgDark.b39b76f7.jfif"},74:function(e,t,n){e.exports=n.p+"static/media/blueBgLight.6108cc32.jfif"},78:function(e,t,n){e.exports=n(168)},83:function(e,t,n){}},[[78,1,2]]]);
//# sourceMappingURL=main.3fa8e7c5.chunk.js.map